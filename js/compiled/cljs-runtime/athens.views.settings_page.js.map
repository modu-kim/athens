{"version":3,"sources":["athens/views/settings_page.cljs"],"mappings":";;AASA,AAAA,AAAMA,AACHC;AADH,AAEE,AAAA,AAAIC;;AACJ,AAAA,AAAIC;;AACJ,AAAA,AAAA,AAACC;;AACD,AAAA,AAACC,AAAOJ;;AAGV,AAAA,AAAMK,AACHL;AADH,AAEE,AAAA,AAAIE;;AACJ,AAAA,AAAID;;AACJ,AAAA,AAAA,AAACE;;AACD,AAAA,AAACC,AAAOJ;;AAGV,AAAA,AAAMM,AACHN;AADH,AAEE,AAAA,AAAAO,AAAKP;AACH,AAACK,AAAOL;;AACR,AAACD,AAAQC;;;AAGb,AAAA,AAAMQ,AACHC,AAAMC;AADT,AAEE,AAAM,AAAK,AAAA,AAAMD,AAAO,AAAA,AAAIA;AAA5B,AACE,AAACL,AAAOM,AAAcD;;AACtB,AAAME,AAA2B,AAACC,AAAwBC,AAAkB,AAAA,AAAQJ;;AACpF,AAAA,AAACN,AAA6CM;;AAHhD;;;AAMF,AAAA,AAAMK;AAAN,AAEE,AAAMd,AAAoB,AAACe,AAAO,AAAA,AAAIb;AAChCc,AAAoB,AAACD,AAAO,AAACE,AAAU,AAAA,AAACC;AAD9C,AAEE;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAOG,AAAA,AAAAX,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKP,AAIHoB,AAAkB,AAAA,AAAAb,AAASP;AAXhC,AAYwB,AAACM,AAAaN;AAZtC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAO,AAAA,AAAA,AAAAY,AAaK,AAAA,AAAAZ,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKP,AAEEqB,AAGAC,AAc0BN;AAhCtC,AAgCsE,AAACR,AAA2B,AAACS,AAAU,AAAA,AAAAE,AAAuBH;AAC/H,AAAA,AAAA,AAAAT,AAACgB,AAAYP,AAAoB,AAAA,AAAAT,AAACU,AAAWD,AAC7C,AAAAQ,AAAA,AAAAjB,AAAOS;AAAP,AAAA,AAAAQ;AAAA;AAAA,AAAA,AACW;;;AADX;AAAA,AAAA,AAEW,AAAA,AAAA,AAAAjB,AAAA,AAA8CS;;;;AAFzD,AAAA,AAGS,AAAA,AAAA,AAAAT,AAAA,AAA8CS","names":["athens.views.settings-page/opt-out","opted-out?","js/posthog","js/window","js/localStorage.setItem","cljs.core/reset!","athens.views.settings-page/opt-in","athens.views.settings-page/handle-click","cljs.core/deref","athens.views.settings-page/handle-debounce-save-input","value","debounce-time","athens.electron/debounce-write-db","goog.functions/debounce","athens.electron/write-db","athens.views.settings-page/settings-page","reagent.core.atom","debounce-save-time!","js/Number","js/localStorage.getItem","p1__64157#","athens.views.buttons/button","js/module$node_modules$$material_ui$icons$index.ToggleOn","js/module$node_modules$$material_ui$icons$index.ToggleOff","cljs.core.prn","G__64158"],"sourcesContent":["(ns athens.views.settings-page\n  (:require\n    [\"@material-ui/icons\" :as mui-icons]\n    [athens.electron :as electron]\n    [athens.views.buttons :refer [button]]\n    [goog.functions :as goog-functions]\n    [reagent.core :as r]))\n\n\n(defn opt-out\n  [opted-out?]\n  (.. js/posthog (capture \"opt-out\"))\n  (.. js/window -posthog opt_out_capturing)\n  (js/localStorage.setItem \"sentry\" \"off\")\n  (reset! opted-out? true))\n\n\n(defn opt-in\n  [opted-out?]\n  (.. js/window -posthog opt_in_capturing)\n  (.. js/posthog (capture \"opt-in\"))\n  (js/localStorage.setItem \"sentry\" \"on\")\n  (reset! opted-out? false))\n\n\n(defn handle-click\n  [opted-out?]\n  (if @opted-out?\n    (opt-in opted-out?)\n    (opt-out opted-out?)))\n\n\n(defn handle-debounce-save-input\n  [value debounce-time]\n  (when (and (<= 0 value) (<= value 1000))\n    (reset! debounce-time value)\n    (set! electron/debounce-write-db (goog-functions/debounce electron/write-db (* 1000 value)))\n    (js/localStorage.setItem \"debounce-save-time\" value)))\n\n\n(defn settings-page\n  []\n  (let [opted-out?          (r/atom (.. js/window -posthog has_opted_out_capturing))\n        debounce-save-time! (r/atom (js/Number (js/localStorage.getItem \"debounce-save-time\")))]\n    (fn []\n      [:div {:style {:display        \"flex\"\n                     :margin         \"0vh 5vw\"\n                     :flex-direction \"column\"}}\n       [:h2 \"Settings\"]\n\n       ;; Analytics\n       (if @opted-out?\n         [:h5 \"Opted Out of Analytics\"]\n         [:h5 \"Opted Into Analytics\"])\n       [:div {:style {:margin \"10px 0\"}}\n        [button {:primary  (false? @opted-out?)\n                 :on-click #(handle-click opted-out?)}\n         (if @opted-out?\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOn]\n            [:span \"\\uD83D\\uDE41 We understand.\"]]\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOff]\n            [:span \"\\uD83D\\uDE00 Thanks for helping make Athens better!\"]])]]\n       [:span \"Analytics are anonymized and delivered by \"\n        [:a {:href \"https://posthog.com\" :target \"_blank\"} \"Posthog\"]\n        \" and \" [:a {:href \"https://sentry.io\" :target \"_blank\"} \"Sentry\"]\n        \", open-source solutions to measure retention, performance, and crashes.\n         This lets the designers and engineers at Athens know if we're really making something people love!\"]\n\n       ;; Auto-save\n       [:div {:style {:margin \"20px 0\"}}\n        [:h5 \"Auto-save\"]\n        [:div {:style {:display \"flex\" :justify-content \"space-between\"\n                       :margin \"10px 0\"}}\n         [:input {:style {:width \"4em\"}\n                  :type  \"number\" :value @debounce-save-time! :on-change #(handle-debounce-save-input (js/Number (.. % -target -value)) debounce-save-time!)}]\n         (prn \"type\" @debounce-save-time! (js/Number @debounce-save-time!))\n         (case @debounce-save-time!\n           0 [:span (str \"Athens will save and create a backup after each edit.\")]\n           1 [:span (str \"Athens will save and create a backup \" @debounce-save-time! \" second after your last edit.\")]\n           [:span (str \"Athens will save and create a backup \" @debounce-save-time! \" seconds after your last edit.\")])]]])))\n\n"]}